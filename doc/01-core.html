<!DOCTYPE html>

<html>
<head>
  <title>01-core.js</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <meta name="viewport" content="width=device-width, target-densitydpi=160dpi, initial-scale=1.0; maximum-scale=1.0; user-scalable=0;">
  <link rel="stylesheet" media="all" href="docco.css" />
</head>
<body>
  <div id="container">
    <div id="background"></div>
    
      <ul id="jump_to">
        <li>
          <a class="large" href="javascript:void(0);">Jump To &hellip;</a>
          <a class="small" href="javascript:void(0);">+</a>
          <div id="jump_wrapper">
          <div id="jump_page_wrapper">
            <div id="jump_page">
              
                
                <a class="source" href="01-core.html">
                  01-core.js
                </a>
              
                
                <a class="source" href="02-deferred.html">
                  02-deferred.js
                </a>
              
            </div>
          </div>
        </li>
      </ul>
    
    <ul class="sections">
        
          <li id="title">
              <div class="annotation">
                  <h1>01-core.js</h1>
              </div>
          </li>
        
        
        
        <li id="section-1">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-1">&#182;</a>
              </div>
              <p><strong>jQuery源码分析</strong></p>
<p><a href="/jquery-annotated-source/">首页</a> | <a href="02-deferred.html">下一章</a></p>

            </div>
            
        </li>
        
        
        <li id="section-2">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-2">&#182;</a>
              </div>
              <pre><code>jQuery JavaScript Library v1<span class="hljs-number">.8</span><span class="hljs-number">.3</span>
http:<span class="hljs-comment">//jquery.com/</span>
Includes Sizzle.js
http:<span class="hljs-comment">//sizzlejs.com/</span>
Copyright <span class="hljs-number">2012</span> jQuery Foundation and other contributors
Released under the MIT license
http:<span class="hljs-comment">//jquery.org/license</span>
<span class="hljs-built_in">Date</span>: Tue Nov <span class="hljs-number">13</span> <span class="hljs-number">2012</span> <span class="hljs-number">08</span>:<span class="hljs-number">20</span>:<span class="hljs-number">33</span> GMT<span class="hljs-number">-0500</span> (Eastern Standard Time)
</code></pre>
            </div>
            
        </li>
        
        
        <li id="section-3">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-3">&#182;</a>
              </div>
              <h3 id="-">第一章: 框架核心</h3>

            </div>
            
        </li>
        
        
        <li id="section-4">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-4">&#182;</a>
              </div>
              <p>传入window和undefined可以减少查找作用链，同时在压缩时可优化变量名</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> window, undefined </span>) </span>{
	
<span class="hljs-keyword">var</span></pre></div></div>
            
        </li>
        
        
        <li id="section-5">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-5">&#182;</a>
              </div>
              <p>对jQuery(document)的一个主要引用，在框架内使用</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    rootjQuery,</pre></div></div>
            
        </li>
        
        
        <li id="section-6">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-6">&#182;</a>
              </div>
              <p>Dom Ready的异步队列(deferred)</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    readyList,</pre></div></div>
            
        </li>
        
        
        <li id="section-7">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-7">&#182;</a>
              </div>
              <p>使用当前window的几个对象,避免window引用到其他作用域下的window下的对象</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="hljs-built_in">document</span> = <span class="hljs-built_in">window</span>.document,
    location = <span class="hljs-built_in">window</span>.location,
    navigator = <span class="hljs-built_in">window</span>.navigator,</pre></div></div>
            
        </li>
        
        
        <li id="section-8">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-8">&#182;</a>
              </div>
              <p>临时保存jQuery，防止重写jQuery，主要在noConflict方法里面用到</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    _jQuery = <span class="hljs-built_in">window</span>.jQuery,</pre></div></div>
            
        </li>
        
        
        <li id="section-9">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-9">&#182;</a>
              </div>
              <p>临时保存$，防止重写$，主要在noConflict方法里面用到</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    _$ = <span class="hljs-built_in">window</span>.$,</pre></div></div>
            
        </li>
        
        
        <li id="section-10">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-10">&#182;</a>
              </div>
              <p>针对一些核心方法的映射，便于压缩时优化</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    core_push = <span class="hljs-built_in">Array</span>.prototype.push,
    core_slice = <span class="hljs-built_in">Array</span>.prototype.slice,
    core_indexOf = <span class="hljs-built_in">Array</span>.prototype.indexOf,
    core_toString = <span class="hljs-built_in">Object</span>.prototype.toString,
    core_hasOwn = <span class="hljs-built_in">Object</span>.prototype.hasOwnProperty,
    core_trim = <span class="hljs-built_in">String</span>.prototype.trim,</pre></div></div>
            
        </li>
        
        
        <li id="section-11">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-11">&#182;</a>
              </div>
              <p>定义jQuery变量，在后面9453行中，把这个变量作为全局变量,并定义别名$</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    jQuery = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> selector, context </span>) </span>{</pre></div></div>
            
        </li>
        
        
        <li id="section-12">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-12">&#182;</a>
              </div>
              <p>内部完成实例化，省去了jquery构造函数的new，同时也可以看书$()返回的其实是jQuery.fn.init的一个实例</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> jQuery.fn.init( selector, context, rootjQuery );
    },</pre></div></div>
            
        </li>
        
        
        <li id="section-13">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-13">&#182;</a>
              </div>
              <p>返回正则的源文本,匹配数字 
[-+]? -|+|| (?:\d*.|) .|2.|| 匹配数字 (?:[eE][-+]?\d+|) 匹配 e+2|E2|e-2||</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    core_pnum = <span class="hljs-regexp">/[\-+]?(?:\d*\.|)\d+(?:[eE][\-+]?\d+|)/</span>.source,</pre></div></div>
            
        </li>
        
        
        <li id="section-14">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-14">&#182;</a>
              </div>
              <p>检查或清除空白字符 core_rnotwhite配置一个非空白字符 core_rspace匹配至少一个空白字符</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    core_rnotwhite = <span class="hljs-regexp">/\S/</span>,
    core_rspace = <span class="hljs-regexp">/\s+/</span>,</pre></div></div>
            
        </li>
        
        
        <li id="section-15">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-15">&#182;</a>
              </div>
              <p>在IE9以下的浏览器中\s不匹配不间断的空格\xA0</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    rtrim = <span class="hljs-regexp">/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g</span>,</pre></div></div>
            
        </li>
        
        
        <li id="section-16">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-16">&#182;</a>
              </div>
              <p>^(?:[^#&lt;]<em>(&lt;[\w\W]+&gt;)[^&gt;]</em>$ 匹配html字符串，不以#开头,#防止xss注入(#9521), 
没理解了加&lt;的作用 #([\w-]*)$) 匹配#开头的字符串
<a href="https://ttmm.io/tech/jquery-xss/">xss参见</a></p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    rquickExpr = <span class="hljs-regexp">/^(?:[^#&lt;]*(&lt;[\w\W]+&gt;)[^&gt;]*$|#([\w\-]*)$)/</span>,</pre></div></div>
            
        </li>
        
        
        <li id="section-17">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-17">&#182;</a>
              </div>
              <p>匹配独立的html标签</br> ^&lt;(\w+)\s*\/?&gt;  匹配<a/>|<a  >|<a>  (?:&lt;\/\1&gt;|)匹配</a> \1为第一捕获组即为(\w+)匹配的内容或者空内容</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>
    rsingleTag = <span class="hljs-regexp">/^&lt;(\w+)\s*\/?&gt;(?:&lt;\/\1&gt;|)$/</span>,</pre></div></div>
            
        </li>
        
        
        <li id="section-18">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-18">&#182;</a>
              </div>
              <p>JSON转换用的正则表达式</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    rvalidchars = <span class="hljs-regexp">/^[\],:{}\s]*$/</span>,
    rvalidbraces = <span class="hljs-regexp">/(?:^|:|,)(?:\s*\[)+/g</span>,
    rvalidescape = <span class="hljs-regexp">/\\(?:["\\\/bfnrt]|u[\da-fA-F]{4})/g</span>,
    rvalidtokens = <span class="hljs-regexp">/"[^"\\\r\n]*"|true|false|null|-?(?:\d\d*\.|)\d+(?:[eE][\-+]?\d+|)/g</span>,</pre></div></div>
            
        </li>
        
        
        <li id="section-19">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-19">&#182;</a>
              </div>
              <p>在兼容驼峰式和连字符式样式名时候用到 rmsPrefix匹配-ms-，兼容ie rdashAlpha匹配 -任意数字和字符</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    rmsPrefix = <span class="hljs-regexp">/^-ms-/</span>,
    rdashAlpha = <span class="hljs-regexp">/-([\da-z])/gi</span>,</pre></div></div>
            
        </li>
        
        
        <li id="section-20">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-20">&#182;</a>
              </div>
              <p>在jQuery.camelCase方法中用来做替换函数</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    fcamelCase = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> all, letter </span>) </span>{
        <span class="hljs-keyword">return</span> ( letter + <span class="hljs-string">""</span> ).toUpperCase();
    },</pre></div></div>
            
        </li>
        
        
        <li id="section-21">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-21">&#182;</a>
              </div>
              <p>The ready event handler and self cleanup method</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    DOMContentLoaded = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">if</span> ( <span class="hljs-built_in">document</span>.addEventListener ) {
            <span class="hljs-built_in">document</span>.removeEventListener( <span class="hljs-string">"DOMContentLoaded"</span>, DOMContentLoaded, <span class="hljs-literal">false</span> );
            jQuery.ready();
        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> ( <span class="hljs-built_in">document</span>.readyState === <span class="hljs-string">"complete"</span> ) {</pre></div></div>
            
        </li>
        
        
        <li id="section-22">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-22">&#182;</a>
              </div>
              <p>针对IE9一下的浏览器做兼容性bug
在ie9一下只有readyState=complete才能确保dom树加载完成Loaded状态有些情况下回报错</p>

            </div>
            
        </li>
        
        
        <li id="section-23">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-23">&#182;</a>
              </div>
              <p><a href="https://msdn.microsoft.com/zh-cn/library/system.windows.forms.webbrowserreadystate.aspx?cs-save-lang=1&amp;cs-lang=vb#code-snippet-1">ie readyState详见</a></p>

            </div>
            
            <div class="content"><div class='highlight'><pre>            <span class="hljs-built_in">document</span>.detachEvent( <span class="hljs-string">"onreadystatechange"</span>, DOMContentLoaded );
            jQuery.ready();
        }
    },</pre></div></div>
            
        </li>
        
        
        <li id="section-24">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-24">&#182;</a>
              </div>
              <p>[[Class]] -&gt; type pairs 这个个人感觉对2的理解应该是to,而非二维数组</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    class2type = {};

	jQuery.fn = jQuery.prototype = {</pre></div></div>
            
        </li>
        
        
        <li id="section-25">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-25">&#182;</a>
              </div>
              <p>为了$(“#id”) instanceof $ 的结果为true,方便开发人员判断类型</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	    <span class="hljs-keyword">constructor</span>: jQuery,
	    init: function( selector, context, rootjQuery ) {
	        <span class="hljs-keyword">var</span> match, elem, ret, doc;</pre></div></div>
            
        </li>
        
        
        <li id="section-26">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-26">&#182;</a>
              </div>
              <p>分支1 可以转化成false，直接返回jQuery对象，length为0 $(“”),<br/>
$(null), $(undefined), $(false)</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	        <span class="hljs-keyword">if</span> ( !selector ) {
	            <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
	        }</pre></div></div>
            
        </li>
        
        
        <li id="section-27">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-27">&#182;</a>
              </div>
              <p>分支2 dom元素 Handle $(DOMElement)</p>

            </div>
            
        </li>
        
        
        <li id="section-28">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-28">&#182;</a>
              </div>
              <p><a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Node/nodeType">nodeType 详见</a></p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	        <span class="hljs-keyword">if</span> ( selector.nodeType ) {</pre></div></div>
            
        </li>
        
        
        <li id="section-29">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-29">&#182;</a>
              </div>
              <p>设置第一个元素和context指向该dom元素</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	            <span class="hljs-keyword">this</span>.context = <span class="hljs-keyword">this</span>[<span class="hljs-number">0</span>] = selector;
	            <span class="hljs-keyword">this</span>.length = <span class="hljs-number">1</span>;</pre></div></div>
            
        </li>
        
        
        <li id="section-30">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-30">&#182;</a>
              </div>
              <p>返回jquery对象</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	            <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
	        }

	        <span class="hljs-keyword">if</span> ( <span class="hljs-keyword">typeof</span> selector === <span class="hljs-string">"string"</span> ) {
	            <span class="hljs-keyword">if</span> ( selector.charAt(<span class="hljs-number">0</span>) === <span class="hljs-string">"&lt;"</span> &amp;&amp; selector.charAt( selector.length - <span class="hljs-number">1</span> ) === <span class="hljs-string">"&gt;"</span> &amp;&amp; selector.length &gt;= <span class="hljs-number">3</span> ) {</pre></div></div>
            
        </li>
        
        
        <li id="section-31">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-31">&#182;</a>
              </div>
              <p>假设该字符是HTML片段，跳过正则检查，有可能匹配到<code>&lt;div&gt;&lt;/p&gt;</code></p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	                match = [ <span class="hljs-literal">null</span>, selector, <span class="hljs-literal">null</span> ];

	            } <span class="hljs-keyword">else</span> {</pre></div></div>
            
        </li>
        
        
        <li id="section-32">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-32">&#182;</a>
              </div>
              <p>abch<span>==&gt;[abch<span>,<span>,undefined]</p>
<p>#aa==&gt;[#aa,undefined,aa]</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	                matched = rquickExpr.exec( selector );
	            }</pre></div></div>
            
        </li>
        
        
        <li id="section-33">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-33">&#182;</a>
              </div>
              <p>Match html or make sure no context is specified for #id</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	            <span class="hljs-keyword">if</span> ( match &amp;&amp; (match[<span class="hljs-number">1</span>] || !context) ) {</pre></div></div>
            
        </li>
        
        
        <li id="section-34">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-34">&#182;</a>
              </div>
              <p>分支3 单独标签</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	                <span class="hljs-keyword">if</span> ( match[<span class="hljs-number">1</span>] ) {</pre></div></div>
            
        </li>
        
        
        <li id="section-35">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-35">&#182;</a>
              </div>
              <p>context如果是jquery对象，则返回第一个dom节点</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	                    context = context <span class="hljs-keyword">instanceof</span> jQuery ? context[<span class="hljs-number">0</span>] : context;</pre></div></div>
            
        </li>
        
        
        <li id="section-36">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-36">&#182;</a>
              </div>
              <p>context 若不存在返回document，若context存在顶层document，则优先使用document
这儿修正context为普通对象的doc，避免doc返回对象解决 #8950bug</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	                    doc = ( context &amp;&amp; context.nodeType ? context.ownerDocument || context : <span class="hljs-built_in">document</span> );</pre></div></div>
            
        </li>
        
        
        <li id="section-37">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-37">&#182;</a>
              </div>
              <p>scripts is true for back-compat</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	                    selector = jQuery.parseHTML( match[<span class="hljs-number">1</span>], doc, <span class="hljs-literal">true</span> );
	                    <span class="hljs-keyword">if</span> ( rsingleTag.test( match[<span class="hljs-number">1</span>] ) &amp;&amp; jQuery.isPlainObject( context ) ) {</pre></div></div>
            
        </li>
        
        
        <li id="section-38">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-38">&#182;</a>
              </div>
              <p>针对 <code>$(&#39;&lt;div&gt;&#39;,{&#39;class&#39;:test});</code>的场景，attr的调用场景如下</p>

            </div>
            
        </li>
        
        
        <li id="section-39">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-39">&#182;</a>
              </div>
              <p><code>if ( pass &amp;&amp; jQuery.isFunction( jQuery.fn[ name ] ) ) {</code>
<code>return jQuery( elem )[ name ]( value );</code>
<code>}</code></p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	                        <span class="hljs-keyword">this</span>.attr.call( selector, context, <span class="hljs-literal">true</span> );
	                    }

	                    <span class="hljs-keyword">return</span> jQuery.merge( <span class="hljs-keyword">this</span>, selector );</pre></div></div>
            
        </li>
        
        
        <li id="section-40">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-40">&#182;</a>
              </div>
              <p>分支4 #id</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	                } <span class="hljs-keyword">else</span> {
	                    elem = <span class="hljs-built_in">document</span>.getElementById( match[<span class="hljs-number">2</span>] );</pre></div></div>
            
        </li>
        
        
        <li id="section-41">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-41">&#182;</a>
              </div>
              <p>检查parentNode属性，在 Blackberry 4.6 会返回不存在文档中的节点#6963</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	                    <span class="hljs-keyword">if</span> ( elem &amp;&amp; elem.parentNode ) {</pre></div></div>
            
        </li>
        
        
        <li id="section-42">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-42">&#182;</a>
              </div>
              <p>在ie6,7等某些浏览器中getElementById可能会按照属性name查找</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	                        <span class="hljs-keyword">if</span> ( elem.id !== match[<span class="hljs-number">2</span>] ) {
	                            <span class="hljs-keyword">return</span> rootjQuery.find( selector );
	                        }
	                        <span class="hljs-keyword">this</span>.length = <span class="hljs-number">1</span>;
	                        <span class="hljs-keyword">this</span>[<span class="hljs-number">0</span>] = elem;
	                    }

	                    <span class="hljs-keyword">this</span>.context = <span class="hljs-built_in">document</span>;
	                    <span class="hljs-keyword">this</span>.selector = selector;
	                    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
	                }</pre></div></div>
            
        </li>
        
        
        <li id="section-43">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-43">&#182;</a>
              </div>
              <p>分支5 选择器表达式</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	            } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> ( !context || context.jquery ) {</pre></div></div>
            
        </li>
        
        
        <li id="section-44">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-44">&#182;</a>
              </div>
              <p>没有指定上下文，或者上下文是jqueyr对象</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	                <span class="hljs-keyword">return</span> ( context || rootjQuery ).find( selector );</pre></div></div>
            
        </li>
        
        
        <li id="section-45">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-45">&#182;</a>
              </div>
              <p>创建一个包含context的jquery对象，然后执行find</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	            } <span class="hljs-keyword">else</span> {
	                <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.constructor( context ).find( selector );
	            }</pre></div></div>
            
        </li>
        
        
        <li id="section-46">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-46">&#182;</a>
              </div>
              <p>分支6 函数 是对$(document).ready(fn)的简写</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> ( jQuery.isFunction( selector ) ) {
	            <span class="hljs-keyword">return</span> rootjQuery.ready( selector );
	        }</pre></div></div>
            
        </li>
        
        
        <li id="section-47">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-47">&#182;</a>
              </div>
              <p>分支7 jquery对象</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	        <span class="hljs-keyword">if</span> ( selector.selector !== <span class="hljs-literal">undefined</span> ) {
	            <span class="hljs-keyword">this</span>.selector = selector.selector;
	            <span class="hljs-keyword">this</span>.context = selector.context;
	        }</pre></div></div>
            
        </li>
        
        
        <li id="section-48">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-48">&#182;</a>
              </div>
              <p>为jquery对象，则返回更新selector和context的jquery对象</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	        <span class="hljs-keyword">return</span> jQuery.makeArray( selector, <span class="hljs-keyword">this</span> );
	    },</pre></div></div>
            
        </li>
        
        
        <li id="section-49">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-49">&#182;</a>
              </div>
              <p>用来记录jQuery查找和过滤Dom元素的时的选择表达式，方便调试 $(‘div’).find(‘p’).selector===&gt;div p</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	    selector: <span class="hljs-string">""</span>,</pre></div></div>
            
        </li>
        
        
        <li id="section-50">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-50">&#182;</a>
              </div>
              <p>当前jquery的版本</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	    jquery: <span class="hljs-string">"1.8.3"</span>,</pre></div></div>
            
        </li>
        
        
        <li id="section-51">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-51">&#182;</a>
              </div>
              <p>jquery类数组的长度</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	    length: <span class="hljs-number">0</span>,</pre></div></div>
            
        </li>
        
        
        <li id="section-52">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-52">&#182;</a>
              </div>
              <p>和length功能一样，优先使用length</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	    size: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
	        <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.length;
	    },</pre></div></div>
            
        </li>
        
        
        <li id="section-53">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-53">&#182;</a>
              </div>
              <p>把当前jquery转换成真正的数组，jquery对象是类数组对象，具体看参照(Javascript权威指南7.8节)</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	    toArray: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
	        <span class="hljs-keyword">return</span> core_slice.call( <span class="hljs-keyword">this</span> );
	    },</pre></div></div>
            
        </li>
        
        
        <li id="section-54">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-54">&#182;</a>
              </div>
              <p>返回当前jquery中指定位置的元素或包含全部元素的数组</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	    get: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> num </span>) </span>{
	        <span class="hljs-keyword">return</span> num == <span class="hljs-literal">null</span> ?</pre></div></div>
            
        </li>
        
        
        <li id="section-55">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-55">&#182;</a>
              </div>
              <p>如果不传参，返回全部元素的数组</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	            <span class="hljs-keyword">this</span>.toArray() :</pre></div></div>
            
        </li>
        
        
        <li id="section-56">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-56">&#182;</a>
              </div>
              <p>如果num为负数，则从元素集合末尾计算</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	            ( num &lt; <span class="hljs-number">0</span> ? <span class="hljs-keyword">this</span>[ <span class="hljs-keyword">this</span>.length + num ] : <span class="hljs-keyword">this</span>[ num ] );
	    },</pre></div></div>
            
        </li>
        
        
        <li id="section-57">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-57">&#182;</a>
              </div>
              <p>创建一个新的空jQuery对象，然后把这个Dom元素放到jquery对象中，返回jquery的引用
elems==&gt;元素数组或类数组对象 name==&gt;产生元素数组的jquery方法名  selector==&gt;修正原型的selector的值 都是便于调试</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	    pushStack: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> elems, name, selector </span>) </span>{

	        
	        <span class="hljs-keyword">var</span> ret = jQuery.merge( <span class="hljs-keyword">this</span>.constructor(), elems );</pre></div></div>
            
        </li>
        
        
        <li id="section-58">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-58">&#182;</a>
              </div>
              <p>形成一个链式栈，新对象位于栈顶</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	        ret.prevObject = <span class="hljs-keyword">this</span>;

	        ret.context = <span class="hljs-keyword">this</span>.context;

	        <span class="hljs-keyword">if</span> ( name === <span class="hljs-string">"find"</span> ) {
	            ret.selector = <span class="hljs-keyword">this</span>.selector + ( <span class="hljs-keyword">this</span>.selector ? <span class="hljs-string">" "</span> : <span class="hljs-string">""</span> ) + selector;
	        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> ( name ) {
	            ret.selector = <span class="hljs-keyword">this</span>.selector + <span class="hljs-string">"."</span> + name + <span class="hljs-string">"("</span> + selector + <span class="hljs-string">")"</span>;
	        }
	        <span class="hljs-keyword">return</span> ret;
	    },</pre></div></div>
            
        </li>
        
        
        <li id="section-59">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-59">&#182;</a>
              </div>
              <p>遍历当前jquery，在每个元素都执行回调函数</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	    each: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> callback, args </span>) </span>{
	        <span class="hljs-keyword">return</span> jQuery.each( <span class="hljs-keyword">this</span>, callback, args );
	    },</pre></div></div>
            
        </li>
        
        
        <li id="section-60">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-60">&#182;</a>
              </div>
              <p>页面加载完成执行的回调函数</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	    ready: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> fn </span>) </span>{

	        jQuery.ready.promise().done( fn );

	        <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
	    },</pre></div></div>
            
        </li>
        
        
        <li id="section-61">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-61">&#182;</a>
              </div>
              <p>返回指定指定位置的元素，返回的也是jquery对象</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	    eq: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> i </span>) </span>{
	        i = +i;
	        <span class="hljs-keyword">return</span> i === <span class="hljs-number">-1</span> ?
	            <span class="hljs-keyword">this</span>.slice( i ) :
	            <span class="hljs-keyword">this</span>.slice( i, i + <span class="hljs-number">1</span> );
	    },</pre></div></div>
            
        </li>
        
        
        <li id="section-62">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-62">&#182;</a>
              </div>
              <p>返回第一个元素</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	    first: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
	        <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.eq( <span class="hljs-number">0</span> );
	    },</pre></div></div>
            
        </li>
        
        
        <li id="section-63">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-63">&#182;</a>
              </div>
              <p>返回最后一个元素</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	    last: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
	        <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.eq( <span class="hljs-number">-1</span> );
	    },</pre></div></div>
            
        </li>
        
        
        <li id="section-64">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-64">&#182;</a>
              </div>
              <p>遍历jquery对象，在每个元素</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	    slice: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
	        <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.pushStack( core_slice.apply( <span class="hljs-keyword">this</span>, <span class="hljs-built_in">arguments</span> ),
	            <span class="hljs-string">"slice"</span>, core_slice.call(<span class="hljs-built_in">arguments</span>).join(<span class="hljs-string">","</span>) );
	    },</pre></div></div>
            
        </li>
        
        
        <li id="section-65">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-65">&#182;</a>
              </div>
              <p>遍历当前jquery对象，在每个元素上执行回调函数，将回调函数的返回值放到一个新的jquery对象</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	    map: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> callback </span>) </span>{
	        <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.pushStack( jQuery.map(<span class="hljs-keyword">this</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> elem, i </span>) </span>{
	            <span class="hljs-keyword">return</span> callback.call( elem, i, elem );
	        }));
	    },</pre></div></div>
            
        </li>
        
        
        <li id="section-66">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-66">&#182;</a>
              </div>
              <p>结束当前链条中最近的筛选，返回之前的一个操作jquery对象</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	    end: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
	        <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.prevObject || <span class="hljs-keyword">this</span>.constructor(<span class="hljs-literal">null</span>);
	    },

	    push: core_push,
	    sort: [].sort,
	    splice: [].splice
	};</pre></div></div>
            
        </li>
        
        
        <li id="section-67">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-67">&#182;</a>
              </div>
              <p>使得jQuery.fn.init的实例可以访问构造函数jQuery的原型和属性</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	jQuery.fn.init.prototype = jQuery.fn;</pre></div></div>
            
        </li>
        
        
        <li id="section-68">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-68">&#182;</a>
              </div>
              <p>参数列表 [deep] target [object…]
deep为是否进行深度合并,如果只有target,直接把方法合并到jQuery或jQuery.fnshang </p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	jQuery.extend = jQuery.fn.extend = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
	    <span class="hljs-keyword">var</span> options, name, src, copy, copyIsArray, clone,
	        target = <span class="hljs-built_in">arguments</span>[<span class="hljs-number">0</span>] || {},
	        i = <span class="hljs-number">1</span>,
	        length = <span class="hljs-built_in">arguments</span>.length,
	        deep = <span class="hljs-literal">false</span>;</pre></div></div>
            
        </li>
        
        
        <li id="section-69">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-69">&#182;</a>
              </div>
              <p>处理是否需要深度合并</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	    <span class="hljs-keyword">if</span> ( <span class="hljs-keyword">typeof</span> target === <span class="hljs-string">"boolean"</span> ) {
	        deep = target;
	        target = <span class="hljs-built_in">arguments</span>[<span class="hljs-number">1</span>] || {};</pre></div></div>
            
        </li>
        
        
        <li id="section-70">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-70">&#182;</a>
              </div>
              <p>修正源对象的下标</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	        i = <span class="hljs-number">2</span>;
	    }</pre></div></div>
            
        </li>
        
        
        <li id="section-71">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-71">&#182;</a>
              </div>
              <p>如果目前对象不是对象和方法，统一替换为{}</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	    <span class="hljs-keyword">if</span> ( <span class="hljs-keyword">typeof</span> target !== <span class="hljs-string">"object"</span> &amp;&amp; !jQuery.isFunction(target) ) {
	        target = {};
	    }</pre></div></div>
            
        </li>
        
        
        <li id="section-72">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-72">&#182;</a>
              </div>
              <p>如果没有传入源对象，则把目标对象置为jquery，同时将传入的对象当作源对象</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	    <span class="hljs-keyword">if</span> ( length === i ) {
	        target = <span class="hljs-keyword">this</span>;
	        --i;
	    }

	    <span class="hljs-keyword">for</span> ( ; i &lt; length; i++ ) {</pre></div></div>
            
        </li>
        
        
        <li id="section-73">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-73">&#182;</a>
              </div>
              <p>如果源对象为空，不处理</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	        <span class="hljs-keyword">if</span> ( (options = <span class="hljs-built_in">arguments</span>[ i ]) != <span class="hljs-literal">null</span> ) {
	            <span class="hljs-keyword">for</span> ( name <span class="hljs-keyword">in</span> options ) {
	                src = target[ name ];
	                copy = options[ name ];</pre></div></div>
            
        </li>
        
        
        <li id="section-74">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-74">&#182;</a>
              </div>
              <p>如果复制的值与目标对象相等，为了避免深度遍历死循环，不做操作</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	                <span class="hljs-keyword">if</span> ( target === copy ) {
	                    <span class="hljs-keyword">continue</span>;
	                }</pre></div></div>
            
        </li>
        
        
        <li id="section-75">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-75">&#182;</a>
              </div>
              <p>如果为深度合并，复制的值为对象和数组，则递归合并</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	                <span class="hljs-keyword">if</span> ( deep &amp;&amp; copy &amp;&amp; ( jQuery.isPlainObject(copy) || (copyIsArray = jQuery.isArray(copy)) ) ) {
	                    <span class="hljs-keyword">if</span> ( copyIsArray ) {
	                        copyIsArray = <span class="hljs-literal">false</span>;
	                        clone = src &amp;&amp; jQuery.isArray(src) ? src : [];

	                    } <span class="hljs-keyword">else</span> {
	                        clone = src &amp;&amp; jQuery.isPlainObject(src) ? src : {};
	                    }</pre></div></div>
            
        </li>
        
        
        <li id="section-76">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-76">&#182;</a>
              </div>
              <p>源对象和目标对象不覆盖，深度复制</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	                    target[ name ] = jQuery.extend( deep, clone, copy );</pre></div></div>
            
        </li>
        
        
        <li id="section-77">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-77">&#182;</a>
              </div>
              <p>不是深度合并，直接覆盖同名属性</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	                } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> ( copy !== <span class="hljs-literal">undefined</span> ) {
	                    target[ name ] = copy;
	                }
	            }
	        }
	    }</pre></div></div>
            
        </li>
        
        
        <li id="section-78">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-78">&#182;</a>
              </div>
              <p>返回目标源</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	    <span class="hljs-keyword">return</span> target;
	};

	jQuery.extend({</pre></div></div>
            
        </li>
        
        
        <li id="section-79">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-79">&#182;</a>
              </div>
              <p>用于释放jQuery对全局变量$的控制权，deep表示是否释放对jQuery的控制权</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	    noConflict: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> deep </span>) </span>{
	        <span class="hljs-keyword">if</span> ( <span class="hljs-built_in">window</span>.$ === jQuery ) {
	            <span class="hljs-built_in">window</span>.$ = _$;
	        }

	        <span class="hljs-keyword">if</span> ( deep &amp;&amp; <span class="hljs-built_in">window</span>.jQuery === jQuery ) {
	            <span class="hljs-built_in">window</span>.jQuery = _jQuery;
	        }

	        <span class="hljs-keyword">return</span> jQuery;
	    },</pre></div></div>
            
        </li>
        
        
        <li id="section-80">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-80">&#182;</a>
              </div>
              <p>Ready状态标记</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	    isReady: <span class="hljs-literal">false</span>,</pre></div></div>
            
        </li>
        
        
        <li id="section-81">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-81">&#182;</a>
              </div>
              <p>Ready等待计数器</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	    readyWait: <span class="hljs-number">1</span>,</pre></div></div>
            
        </li>
        
        
        <li id="section-82">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-82">&#182;</a>
              </div>
              <p>延迟或恢复Ready触发，hold true为延迟执行， false为恢复</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	    holdReady: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> hold </span>) </span>{
	        <span class="hljs-keyword">if</span> ( hold ) {
	            jQuery.readyWait++;
	        } <span class="hljs-keyword">else</span> {
	            jQuery.ready( <span class="hljs-literal">true</span> );
	        }
	    },</pre></div></div>
            
        </li>
        
        
        <li id="section-83">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-83">&#182;</a>
              </div>
              <p>执行ready事件监听函数列表readyList</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	    ready: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> wait </span>) </span>{

	        <span class="hljs-keyword">if</span> ( wait === <span class="hljs-literal">true</span> ? --jQuery.readyWait : jQuery.isReady ) {</pre></div></div>
            
        </li>
        
        
        <li id="section-84">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-84">&#182;</a>
              </div>
              <p>有延迟ready或者已经执行过了的情况</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	            <span class="hljs-keyword">return</span>;
	        }</pre></div></div>
            
        </li>
        
        
        <li id="section-85">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-85">&#182;</a>
              </div>
              <p>Make sure body exists, at least, in case IE gets a little overzealous (ticket #5443).</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	        <span class="hljs-keyword">if</span> ( !<span class="hljs-built_in">document</span>.body ) {
	            <span class="hljs-keyword">return</span> setTimeout( jQuery.ready, <span class="hljs-number">1</span> );
	        }</pre></div></div>
            
        </li>
        
        
        <li id="section-86">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-86">&#182;</a>
              </div>
              <p>标记ready事件就绪</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	        jQuery.isReady = <span class="hljs-literal">true</span>;</pre></div></div>
            
        </li>
        
        
        <li id="section-87">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-87">&#182;</a>
              </div>
              <p>防御性检测，如果jQuery.readyWait-1后仍大于0，说明ready事件延迟尚未全部恢复，则返回，等待再次执行jQuery.holdReady(false)</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	        <span class="hljs-keyword">if</span> ( wait !== <span class="hljs-literal">true</span> &amp;&amp; --jQuery.readyWait &gt; <span class="hljs-number">0</span> ) {
	            <span class="hljs-keyword">return</span>;
	        }</pre></div></div>
            
        </li>
        
        
        <li id="section-88">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-88">&#182;</a>
              </div>
              <p>document 事件监听函数上下文  jQuery指定了ready事件监听函数的列表</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	        readyList.resolveWith( <span class="hljs-built_in">document</span>, [ jQuery ] );</pre></div></div>
            
        </li>
        
        
        <li id="section-89">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-89">&#182;</a>
              </div>
              <p>执行通过$(document).on(“ready”,handler)绑定的ready事件监听函数</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	        <span class="hljs-keyword">if</span> ( jQuery.fn.trigger ) {
	            jQuery( <span class="hljs-built_in">document</span> ).trigger(<span class="hljs-string">"ready"</span>).off(<span class="hljs-string">"ready"</span>);
	        }
	    },</pre></div></div>
            
        </li>
        
        
        <li id="section-90">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-90">&#182;</a>
              </div>
              <p>判断该obj是否为函数</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	    isFunction: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> obj </span>) </span>{
	        <span class="hljs-keyword">return</span> jQuery.type(obj) === <span class="hljs-string">"function"</span>;
	    },</pre></div></div>
            
        </li>
        
        
        <li id="section-91">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-91">&#182;</a>
              </div>
              <p>判断该obj是否为函数,在ie9之上可直接使用原生的判断</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	    isArray: <span class="hljs-built_in">Array</span>.isArray || <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> obj </span>) </span>{
	        <span class="hljs-keyword">return</span> jQuery.type(obj) === <span class="hljs-string">"array"</span>;
	    },</pre></div></div>
            
        </li>
        
        
        <li id="section-92">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-92">&#182;</a>
              </div>
              <p>通过检测特征属性window来判断传入的对象是否是window对象</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	    isWindow: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> obj </span>) </span>{
	        <span class="hljs-keyword">return</span> obj != <span class="hljs-literal">null</span> &amp;&amp; obj == obj.window;
	    },</pre></div></div>
            
        </li>
        
        
        <li id="section-93">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-93">&#182;</a>
              </div>
              <p>判断obj是否为一个数字，首先会判断是否是一个数字，然后判断该数字是否是有限数字</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	    isNumeric: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> obj </span>) </span>{
	        <span class="hljs-keyword">return</span> !<span class="hljs-built_in">isNaN</span>( <span class="hljs-built_in">parseFloat</span>(obj) ) &amp;&amp; <span class="hljs-built_in">isFinite</span>( obj );
	    },</pre></div></div>
            
        </li>
        
        
        <li id="section-94">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-94">&#182;</a>
              </div>
              <p>用来判断参数内建的Javascript类型,如果参数为null或undefined,返回”null”,”undefined”
使用core_toString而不用obj.toString是防止某些obj重写该方法导致判断不准确</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	    type: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> obj </span>) </span>{
	        <span class="hljs-keyword">return</span> obj == <span class="hljs-literal">null</span> ?
	            <span class="hljs-built_in">String</span>( obj ) :
	        class2type[ core_toString.call(obj) ] || <span class="hljs-string">"object"</span>;
	    },</pre></div></div>
            
        </li>
        
        
        <li id="section-95">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-95">&#182;</a>
              </div>
              <p>判断obj是否是一个简单对象，即通过对象直接量{}或new object()创建的</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	    isPlainObject: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> obj </span>) </span>{</pre></div></div>
            
        </li>
        
        
        <li id="section-96">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-96">&#182;</a>
              </div>
              <p>必须是一个对象，不通过DOM节点和window对象</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	        <span class="hljs-keyword">if</span> ( !obj || jQuery.type(obj) !== <span class="hljs-string">"object"</span> || obj.nodeType || jQuery.isWindow( obj ) ) {
	            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
	        }

	        <span class="hljs-keyword">try</span> {</pre></div></div>
            
        </li>
        
        
        <li id="section-97">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-97">&#182;</a>
              </div>
              <p>obj.constructo 为false 对应的是对象直接量
默认constructor都是原型属性，hasOwnProperty返回true,则可表明肯定自定义构造函数覆盖了constructor
isPrototypeOf 是Object原型上的特有属性，如果原型对象上没有该isPrototypeOf，则肯定不是object对象</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	            <span class="hljs-keyword">if</span> ( obj.constructor &amp;&amp;
	                !core_hasOwn.call(obj, <span class="hljs-string">"constructor"</span>) &amp;&amp;
	                !core_hasOwn.call(obj.constructor.prototype, <span class="hljs-string">"isPrototypeOf"</span>) ) {
	                <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
	            }
	        } <span class="hljs-keyword">catch</span> ( e ) {</pre></div></div>
            
        </li>
        
        
        <li id="section-98">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-98">&#182;</a>
              </div>
              <p>IE8,9 Will throw exceptions on certain host objects #9897</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
	        }</pre></div></div>
            
        </li>
        
        
        <li id="section-99">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-99">&#182;</a>
              </div>
              <p>for in循环是会先循环实例属性，然后循环原型属性，如果循环的最后一个是原型属性，则不是new Object()</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>
	        <span class="hljs-keyword">var</span> key;
	        <span class="hljs-keyword">for</span> ( key <span class="hljs-keyword">in</span> obj ) {}

	        <span class="hljs-keyword">return</span> key === <span class="hljs-literal">undefined</span> || core_hasOwn.call( obj, key );
	    },</pre></div></div>
            
        </li>
        
        
        <li id="section-100">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-100">&#182;</a>
              </div>
              <p>检测obj是否为空对象</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	    isEmptyObject: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> obj </span>) </span>{
	        <span class="hljs-keyword">var</span> name;
	        <span class="hljs-keyword">for</span> ( name <span class="hljs-keyword">in</span> obj ) {
	            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
	        }
	        <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
	    },</pre></div></div>
            
        </li>
        
        
        <li id="section-101">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-101">&#182;</a>
              </div>
              <p>接收一个字符串，抛出一个错误异常，开发插件可覆盖这个方法，来显示更多的错误信息</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	    error: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> msg </span>) </span>{
	        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>( msg );
	    },</pre></div></div>
            
        </li>
        
        
        <li id="section-102">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-102">&#182;</a>
              </div>
              <p>data: string of html
context (optional): If specified, the fragment will be created in this context, defaults to document
scripts (optional): If true, will include scripts passed in the html string</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	    parseHTML: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> data, context, scripts </span>) </span>{
	        <span class="hljs-keyword">var</span> parsed;
	        <span class="hljs-keyword">if</span> ( !data || <span class="hljs-keyword">typeof</span> data !== <span class="hljs-string">"string"</span> ) {
	            <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
	        }</pre></div></div>
            
        </li>
        
        
        <li id="section-103">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-103">&#182;</a>
              </div>
              <p>非常巧妙的处理了parseHTML(data,true)的情况</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	        <span class="hljs-keyword">if</span> ( <span class="hljs-keyword">typeof</span> context === <span class="hljs-string">"boolean"</span> ) {
	            scripts = context;
	            context = <span class="hljs-number">0</span>;
	        }
	        context = context || <span class="hljs-built_in">document</span>;</pre></div></div>
            
        </li>
        
        
        <li id="section-104">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-104">&#182;</a>
              </div>
              <p>如果是单标签，直接返回创建好的dom节点</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	        <span class="hljs-keyword">if</span> ( (parsed = rsingleTag.exec( data )) ) {
	            <span class="hljs-keyword">return</span> [ context.createElement( parsed[<span class="hljs-number">1</span>] ) ];
	        }</pre></div></div>
            
        </li>
        
        
        <li id="section-105">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-105">&#182;</a>
              </div>
              <p>在DOM操作模块单独说明，</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	        parsed = jQuery.buildFragment( [ data ], context, scripts ? <span class="hljs-literal">null</span> : [] );
	        <span class="hljs-keyword">return</span> jQuery.merge( [],
	            (parsed.cacheable ? jQuery.clone( parsed.fragment ) : parsed.fragment).childNodes );
	    },</pre></div></div>
            
        </li>
        
        
        <li id="section-106">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-106">&#182;</a>
              </div>
              <p>data为格式良好的json字符串，返回解析后的javascript对象</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	    parseJSON: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> data </span>) </span>{
	        <span class="hljs-keyword">if</span> ( !data || <span class="hljs-keyword">typeof</span> data !== <span class="hljs-string">"string"</span>) {
	            <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
	        }</pre></div></div>
            
        </li>
        
        
        <li id="section-107">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-107">&#182;</a>
              </div>
              <p>移除开头和末尾的空白符，在ie6/7中，如果有空白符就不能正确的解析</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	        data = jQuery.trim( data );</pre></div></div>
            
        </li>
        
        
        <li id="section-108">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-108">&#182;</a>
              </div>
              <p>如果支持原生的解析，优先使用原生的</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	        <span class="hljs-keyword">if</span> ( <span class="hljs-built_in">window</span>.JSON &amp;&amp; <span class="hljs-built_in">window</span>.JSON.parse ) {
	            <span class="hljs-keyword">return</span> <span class="hljs-built_in">window</span>.JSON.parse( data );
	        }</pre></div></div>
            
        </li>
        
        
        <li id="section-109">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-109">&#182;</a>
              </div>
              <p>确保传入的字符串是一个真正的json字符串，从json2.js的逻辑中拷贝来的</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	        <span class="hljs-keyword">if</span> ( rvalidchars.test( data.replace( rvalidescape, <span class="hljs-string">"@"</span> )
	                .replace( rvalidtokens, <span class="hljs-string">"]"</span> )
	                .replace( rvalidbraces, <span class="hljs-string">""</span>)) ) {

	            <span class="hljs-keyword">return</span> ( <span class="hljs-keyword">new</span> <span class="hljs-built_in">Function</span>( <span class="hljs-string">"return "</span> + data ) )();

	        }
	        jQuery.error( <span class="hljs-string">"Invalid JSON: "</span> + data );
	    },</pre></div></div>
            
        </li>
        
        
        <li id="section-110">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-110">&#182;</a>
              </div>
              <p>接收一个良好格式的XML字符串，返回解析后的XML文档</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	    parseXML: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> data </span>) </span>{
	        <span class="hljs-keyword">var</span> xml, tmp;
	        <span class="hljs-keyword">if</span> ( !data || <span class="hljs-keyword">typeof</span> data !== <span class="hljs-string">"string"</span> ) {
	            <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
	        }
	        <span class="hljs-keyword">try</span> {
	            <span class="hljs-keyword">if</span> ( <span class="hljs-built_in">window</span>.DOMParser ) { <span class="hljs-comment">// Standard</span>
	                tmp = <span class="hljs-keyword">new</span> DOMParser();
	                xml = tmp.parseFromString( data , <span class="hljs-string">"text/xml"</span> );
	            } <span class="hljs-keyword">else</span> {</pre></div></div>
            
        </li>
        
        
        <li id="section-111">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-111">&#182;</a>
              </div>
              <p>低版本的ie使用ActiveXObject对象来解析</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	                xml = <span class="hljs-keyword">new</span> ActiveXObject( <span class="hljs-string">"Microsoft.XMLDOM"</span> );
	                xml.async = <span class="hljs-string">"false"</span>;
	                xml.loadXML( data );
	            }
	        } <span class="hljs-keyword">catch</span>( e ) {
	            xml = <span class="hljs-literal">undefined</span>;
	        }
	        <span class="hljs-keyword">if</span> ( !xml || !xml.documentElement || xml.getElementsByTagName( <span class="hljs-string">"parsererror"</span> ).length ) {
	            jQuery.error( <span class="hljs-string">"Invalid XML: "</span> + data );
	        }
	        <span class="hljs-keyword">return</span> xml;
	    },</pre></div></div>
            
        </li>
        
        
        <li id="section-112">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-112">&#182;</a>
              </div>
              <p>空函数，可以作为回调函数的默认值</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	    noop: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{},</pre></div></div>
            
        </li>
        
        
        <li id="section-113">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-113">&#182;</a>
              </div>
              <p>全局作用域执行javascript代码</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	    globalEval: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> data </span>) </span>{
	        <span class="hljs-keyword">if</span> ( data &amp;&amp; core_rnotwhite.test( data ) ) {</pre></div></div>
            
        </li>
        
        
        <li id="section-114">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-114">&#182;</a>
              </div>
              <p>在ie下直接执行execScript方法让javascript全局作用域执行
否则用匿名函数执行，上下文设置为window，因为在火狐中上下文为jquery</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	            ( <span class="hljs-built_in">window</span>.execScript || <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> data </span>) </span>{
	                <span class="hljs-built_in">window</span>[ <span class="hljs-string">"eval"</span> ].call( <span class="hljs-built_in">window</span>, data );
	            } )( data );
	        }
	    },</pre></div></div>
            
        </li>
        
        
        <li id="section-115">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-115">&#182;</a>
              </div>
              <p>转换连字符的字符串为驼峰式，用于CSS模块和数据缓存模块 camelCase(‘background-color’)==&gt;backgroundColor</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	    camelCase: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> string </span>) </span>{
	        <span class="hljs-keyword">return</span> string.replace( rmsPrefix, <span class="hljs-string">"ms-"</span> ).replace( rdashAlpha, fcamelCase );
	    },

	    nodeName: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> elem, name </span>) </span>{
	        <span class="hljs-keyword">return</span> elem.nodeName &amp;&amp; elem.nodeName.toLowerCase() === name.toLowerCase();
	    },</pre></div></div>
            
        </li>
        
        
        <li id="section-116">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-116">&#182;</a>
              </div>
              <p>静态方法each是一个通用的遍历迭代的方法，用于遍历数组和类数组对象，obj==&gt;待遍历的对象，callback==&gt;回调函数，数组每个元素都执行，args==&gt;该参数会传递给回调函数</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	    each: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> obj, callback, args </span>) </span>{
	        <span class="hljs-keyword">var</span> name,
	            i = <span class="hljs-number">0</span>,
	            length = obj.length,</pre></div></div>
            
        </li>
        
        
        <li id="section-117">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-117">&#182;</a>
              </div>
              <p>判断obj是对象还是数组</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	            isObj = length === <span class="hljs-literal">undefined</span> || jQuery.isFunction( obj );

	        <span class="hljs-keyword">if</span> ( args ) {
	            <span class="hljs-keyword">if</span> ( isObj ) {
	                <span class="hljs-keyword">for</span> ( name <span class="hljs-keyword">in</span> obj ) {
	                    <span class="hljs-keyword">if</span> ( callback.apply( obj[ name ], args ) === <span class="hljs-literal">false</span> ) {
	                        <span class="hljs-keyword">break</span>;
	                    }
	                }
	            } <span class="hljs-keyword">else</span> {
	                <span class="hljs-keyword">for</span> ( ; i &lt; length; ) {
	                    <span class="hljs-keyword">if</span> ( callback.apply( obj[ i++ ], args ) === <span class="hljs-literal">false</span> ) {
	                        <span class="hljs-keyword">break</span>;
	                    }
	                }
	            }</pre></div></div>
            
        </li>
        
        
        <li id="section-118">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-118">&#182;</a>
              </div>
              <p>如果没有传入参数参数args，则传入下标和属性名</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	        } <span class="hljs-keyword">else</span> {
	            <span class="hljs-keyword">if</span> ( isObj ) {
	                <span class="hljs-keyword">for</span> ( name <span class="hljs-keyword">in</span> obj ) {
	                    <span class="hljs-keyword">if</span> ( callback.call( obj[ name ], name, obj[ name ] ) === <span class="hljs-literal">false</span> ) {
	                        <span class="hljs-keyword">break</span>;
	                    }
	                }
	            } <span class="hljs-keyword">else</span> {
	                <span class="hljs-keyword">for</span> ( ; i &lt; length; ) {
	                    <span class="hljs-keyword">if</span> ( callback.call( obj[ i ], i, obj[ i++ ] ) === <span class="hljs-literal">false</span> ) {
	                        <span class="hljs-keyword">break</span>;
	                    }
	                }
	            }
	        }

	        <span class="hljs-keyword">return</span> obj;
	    },</pre></div></div>
            
        </li>
        
        
        <li id="section-119">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-119">&#182;</a>
              </div>
              <p>用于移除字符串开头和结尾的空白符</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	    trim: core_trim &amp;&amp; !core_trim.call(<span class="hljs-string">"\uFEFF\xA0"</span>) ?
	        <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> text </span>) </span>{</pre></div></div>
            
        </li>
        
        
        <li id="section-120">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-120">&#182;</a>
              </div>
              <p>使用ES5新增的string方法</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	            <span class="hljs-keyword">return</span> text == <span class="hljs-literal">null</span> ?
	                <span class="hljs-string">""</span> :
	                core_trim.call( text );
	        } :</pre></div></div>
            
        </li>
        
        
        <li id="section-121">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-121">&#182;</a>
              </div>
              <p>如果不支持ES5,则使用字符串替换的方式来移除空白字符</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	        <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> text </span>) </span>{</pre></div></div>
            
        </li>
        
        
        <li id="section-122">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-122">&#182;</a>
              </div>
              <p>text +”” 获取到text的字符串表示，然后用正则替换空白字符串</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	            <span class="hljs-keyword">return</span> text == <span class="hljs-literal">null</span> ?
	                <span class="hljs-string">""</span> :
	                ( text + <span class="hljs-string">""</span> ).replace( rtrim, <span class="hljs-string">""</span> );
	        },</pre></div></div>
            
        </li>
        
        
        <li id="section-123">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-123">&#182;</a>
              </div>
              <p>将一个类数组转换成真正的数组 arr==&gt; 待转换类型 results==&gt;仅在jquery内部使用</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	    makeArray: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> arr, results </span>) </span>{
	        <span class="hljs-keyword">var</span> type,
	            ret = results || [];

	        <span class="hljs-keyword">if</span> ( arr != <span class="hljs-literal">null</span> ) {</pre></div></div>
            
        </li>
        
        
        <li id="section-124">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-124">&#182;</a>
              </div>
              <p>The window, strings (and functions) also have ‘length’
Tweaked logic slightly to handle Blackberry 4.7 RegExp issues #6930</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	            type = jQuery.type( arr );

	            <span class="hljs-keyword">if</span> ( arr.length == <span class="hljs-literal">null</span> || type === <span class="hljs-string">"string"</span> || type === <span class="hljs-string">"function"</span> || type === <span class="hljs-string">"regexp"</span> || jQuery.isWindow( arr ) ) {
	                core_push.call( ret, arr );
	            } <span class="hljs-keyword">else</span> {
	                jQuery.merge( ret, arr );
	            }
	        }

	        <span class="hljs-keyword">return</span> ret;
	    },</pre></div></div>
            
        </li>
        
        
        <li id="section-125">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-125">&#182;</a>
              </div>
              <p>在数组中查找指定的元素并返回其下标，如果为找到会返回-1 elem==&gt;要查找的值 arr==&gt;待遍历的数组 i==&gt;指定查找的位置，默认为0</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	    inArray: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> elem, arr, i </span>) </span>{
	        <span class="hljs-keyword">var</span> len;

	        <span class="hljs-keyword">if</span> ( arr ) {
	            <span class="hljs-keyword">if</span> ( core_indexOf ) {
	                <span class="hljs-keyword">return</span> core_indexOf.call( arr, elem, i );
	            }

	            len = arr.length;</pre></div></div>
            
        </li>
        
        
        <li id="section-126">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-126">&#182;</a>
              </div>
              <p>修正参数i，默认为0，如果小于0，则加上len</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	            i = i ? i &lt; <span class="hljs-number">0</span> ? <span class="hljs-built_in">Math</span>.max( <span class="hljs-number">0</span>, len + i ) : i : <span class="hljs-number">0</span>;

	            <span class="hljs-keyword">for</span> ( ; i &lt; len; i++ ) {</pre></div></div>
            
        </li>
        
        
        <li id="section-127">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-127">&#182;</a>
              </div>
              <p>如果i in arr返回false，说明数组是不连续的也就不需要和指定值elem比较了</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	                <span class="hljs-keyword">if</span> ( i <span class="hljs-keyword">in</span> arr &amp;&amp; arr[ i ] === elem ) {
	                    <span class="hljs-keyword">return</span> i;
	                }
	            }
	        }

	        <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;
	    },</pre></div></div>
            
        </li>
        
        
        <li id="section-128">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-128">&#182;</a>
              </div>
              <p>合并第二个数组和类数组到第一个数组或类数组中</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	    merge: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> first, second </span>) </span>{
	        <span class="hljs-keyword">var</span> l = second.length,
	            i = first.length,
	            j = <span class="hljs-number">0</span>;

	        <span class="hljs-keyword">if</span> ( <span class="hljs-keyword">typeof</span> l === <span class="hljs-string">"number"</span> ) {
	            <span class="hljs-keyword">for</span> ( ; j &lt; l; j++ ) {
	                first[ i++ ] = second[ j ];
	            }

	        } <span class="hljs-keyword">else</span> {</pre></div></div>
            
        </li>
        
        
        <li id="section-129">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-129">&#182;</a>
              </div>
              <p>second 不是类数组，但是含有连续整形属性的对象</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	            <span class="hljs-keyword">while</span> ( second[j] !== <span class="hljs-literal">undefined</span> ) {
	                first[ i++ ] = second[ j++ ];
	            }
	        }

	        first.length = i;

	        <span class="hljs-keyword">return</span> first;
	    },</pre></div></div>
            
        </li>
        
        
        <li id="section-130">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-130">&#182;</a>
              </div>
              <p>用于查找数组中满足过滤函数的元素，原数组不受影响 inv==&gt;为true是则返回一个不满足回调函数的元素数组</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	    grep: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> elems, callback, inv </span>) </span>{
	        <span class="hljs-keyword">var</span> retVal,
	            ret = [],
	            i = <span class="hljs-number">0</span>,
	            length = elems.length;
	        inv = !!inv;

	        <span class="hljs-keyword">for</span> ( ; i &lt; length; i++ ) {
	            retVal = !!callback( elems[ i ], i );
	            <span class="hljs-keyword">if</span> ( inv !== retVal ) {
	                ret.push( elems[ i ] );
	            }
	        }

	        <span class="hljs-keyword">return</span> ret;
	    },</pre></div></div>
            
        </li>
        
        
        <li id="section-131">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-131">&#182;</a>
              </div>
              <p>静态方法对数组中的每个元素或对象的每个属性调用回调函数，并把回调函数的返回值放的 一个新的数组中</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	    map: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> elems, callback, arg </span>) </span>{
	        <span class="hljs-keyword">var</span> value, key,
	            ret = [],
	            i = <span class="hljs-number">0</span>,
	            length = elems.length,</pre></div></div>
            
        </li>
        
        
        <li id="section-132">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-132">&#182;</a>
              </div>
              <p>jquery objects are treated as arrays</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	            isArray = elems <span class="hljs-keyword">instanceof</span> jQuery || length !== <span class="hljs-literal">undefined</span> &amp;&amp; <span class="hljs-keyword">typeof</span> length === <span class="hljs-string">"number"</span> &amp;&amp; ( ( length &gt; <span class="hljs-number">0</span> &amp;&amp; elems[ <span class="hljs-number">0</span> ] &amp;&amp; elems[ length <span class="hljs-number">-1</span> ] ) || length === <span class="hljs-number">0</span> || jQuery.isArray( elems ) ) ;</pre></div></div>
            
        </li>
        
        
        <li id="section-133">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-133">&#182;</a>
              </div>
              <p>遍历数组</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	        <span class="hljs-keyword">if</span> ( isArray ) {
	            <span class="hljs-keyword">for</span> ( ; i &lt; length; i++ ) {
	                value = callback( elems[ i ], i, arg );

	                <span class="hljs-keyword">if</span> ( value != <span class="hljs-literal">null</span> ) {
	                    ret[ ret.length ] = value;
	                }
	            }</pre></div></div>
            
        </li>
        
        
        <li id="section-134">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-134">&#182;</a>
              </div>
              <p>遍历对象</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	        } <span class="hljs-keyword">else</span> {
	            <span class="hljs-keyword">for</span> ( key <span class="hljs-keyword">in</span> elems ) {
	                value = callback( elems[ key ], key, arg );

	                <span class="hljs-keyword">if</span> ( value != <span class="hljs-literal">null</span> ) {
	                    ret[ ret.length ] = value;
	                }
	            }
	        }</pre></div></div>
            
        </li>
        
        
        <li id="section-135">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-135">&#182;</a>
              </div>
              <p>优雅的实现数组二位数组降维，可以理解成[].concat([1,1])</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	        <span class="hljs-keyword">return</span> ret.concat.apply( [], ret );
	    },</pre></div></div>
            
        </li>
        
        
        <li id="section-136">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-136">&#182;</a>
              </div>
              <p>一个全局计数器，用与jquery事件模块和缓存模块</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	    guid: <span class="hljs-number">1</span>,</pre></div></div>
            
        </li>
        
        
        <li id="section-137">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-137">&#182;</a>
              </div>
              <p>接收一个函数，返回一个总是持有指定上下文的新函数
proxy(fn,context)===&gt;指定参数fn的上下文始终为参数context
proxy(context,name)===&gt;参数name为context的属性，指定参数name对应函数的上下文始终为context</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	    proxy: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> fn, context </span>) </span>{
	        <span class="hljs-keyword">var</span> tmp, args, proxy;</pre></div></div>
            
        </li>
        
        
        <li id="section-138">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-138">&#182;</a>
              </div>
              <p>针对以上场景的第二种场景</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	        <span class="hljs-keyword">if</span> ( <span class="hljs-keyword">typeof</span> context === <span class="hljs-string">"string"</span> ) {
	            tmp = fn[ context ];
	            context = fn;
	            fn = tmp;
	        }</pre></div></div>
            
        </li>
        
        
        <li id="section-139">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-139">&#182;</a>
              </div>
              <p>确保fn是一个函数</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	        <span class="hljs-keyword">if</span> ( !jQuery.isFunction( fn ) ) {
	            <span class="hljs-keyword">return</span> <span class="hljs-literal">undefined</span>;
	        }</pre></div></div>
            
        </li>
        
        
        <li id="section-140">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-140">&#182;</a>
              </div>
              <p>收集其他的入参</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	        args = core_slice.call( <span class="hljs-built_in">arguments</span>, <span class="hljs-number">2</span> );</pre></div></div>
            
        </li>
        
        
        <li id="section-141">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-141">&#182;</a>
              </div>
              <p>创建一个代理函数，在函数中调用原生的fn，并通过apply来指定上下文，并通过闭包获取到之前收集到的参数</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	        proxy = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
	            <span class="hljs-keyword">return</span> fn.apply( context, args.concat( core_slice.call( <span class="hljs-built_in">arguments</span> ) ) );
	        };</pre></div></div>
            
        </li>
        
        
        <li id="section-142">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-142">&#182;</a>
              </div>
              <p>将代理函数和原始函数通过guid关联起来，便于移除函数是使用</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	        proxy.guid = fn.guid = fn.guid || jQuery.guid++;

	        <span class="hljs-keyword">return</span> proxy;
	    },</pre></div></div>
            
        </li>
        
        
        <li id="section-143">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-143">&#182;</a>
              </div>
              <p> elems==&gt; 在jq源码中应用场景为this，fn==&gt;函数 ，key==&gt; 属性 ，value==&gt;值，chainable ==&gt;是否可以链式调用 ，emptyGet==&gt; this中没有选中对象的返回值, pass==&gt;是否为原始数据，如果为false，说明value是个函数 </p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	    access: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> elems, fn, key, value, chainable, emptyGet, pass </span>) </span>{
	        <span class="hljs-keyword">var</span> exec,
	            bulk = key == <span class="hljs-literal">null</span>,
	            i = <span class="hljs-number">0</span>,
	            length = elems.length;</pre></div></div>
            
        </li>
        
        
        <li id="section-144">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-144">&#182;</a>
              </div>
              <p>如果参数key是对象，则表示要设置多个属性，遍历参数key，遍历调用access方法，设置为可链式调用</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	        <span class="hljs-keyword">if</span> ( key &amp;&amp; <span class="hljs-keyword">typeof</span> key === <span class="hljs-string">"object"</span> ) {
	            <span class="hljs-keyword">for</span> ( i <span class="hljs-keyword">in</span> key ) {
	                jQuery.access( elems, fn, i, key[i], <span class="hljs-number">1</span>, emptyGet, value );
	            }
	            chainable = <span class="hljs-number">1</span>;</pre></div></div>
            
        </li>
        
        
        <li id="section-145">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-145">&#182;</a>
              </div>
              <p>设置一个属性</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> ( value !== <span class="hljs-literal">undefined</span> ) {
	        	
	            exec = pass === <span class="hljs-literal">undefined</span> &amp;&amp; jQuery.isFunction( value );</pre></div></div>
            
        </li>
        
        
        <li id="section-146">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-146">&#182;</a>
              </div>
              <p>是否要批量执行，主要看fn的实现逻辑</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	            <span class="hljs-keyword">if</span> ( bulk ) {
	                <span class="hljs-keyword">if</span> ( exec ) {</pre></div></div>
            
        </li>
        
        
        <li id="section-147">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-147">&#182;</a>
              </div>
              <p>执行$(“#id”).html(function(){return value})</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	                    exec = fn;
	                    fn = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> elem, key, value </span>) </span>{
	                        <span class="hljs-keyword">return</span> exec.call( jQuery( elem ), value );
	                    };</pre></div></div>
            
        </li>
        
        
        <li id="section-148">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-148">&#182;</a>
              </div>
              <p>fn直接调用整个elems</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	                } <span class="hljs-keyword">else</span> {
	                    fn.call( elems, value );
	                    fn = <span class="hljs-literal">null</span>;
	                }
	            }</pre></div></div>
            
        </li>
        
        
        <li id="section-149">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-149">&#182;</a>
              </div>
              <p>如果要批量执行fn，则递归循环elems，针对每个elems依次调用fn</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	            <span class="hljs-keyword">if</span> ( fn ) {
	                <span class="hljs-keyword">for</span> (; i &lt; length; i++ ) {
	                    fn( elems[i], key, exec ? value.call( elems[i], i, fn( elems[i], key ) ) : value, pass );
	                }
	            }

	            chainable = <span class="hljs-number">1</span>;
	        }

	        <span class="hljs-keyword">return</span> chainable ?
	            elems :</pre></div></div>
            
        </li>
        
        
        <li id="section-150">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-150">&#182;</a>
              </div>
              <p>为get取值，不要链式调用</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	            bulk ?
	                fn.call( elems ) :
	                length ? fn( elems[<span class="hljs-number">0</span>], key ) : emptyGet;
	    },</pre></div></div>
            
        </li>
        
        
        <li id="section-151">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-151">&#182;</a>
              </div>
              <p>当前时间的毫秒显示的简写</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	    now: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
	        <span class="hljs-keyword">return</span> ( <span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>() ).getTime();
	    }
	});
	
	jQuery.ready.promise = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> obj </span>) </span>{
	    <span class="hljs-keyword">if</span> ( !readyList ) {</pre></div></div>
            
        </li>
        
        
        <li id="section-152">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-152">&#182;</a>
              </div>
              <p>初始化jquery ready回调列表对象readyList</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	        readyList = jQuery.Deferred();</pre></div></div>
            
        </li>
        
        
        <li id="section-153">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-153">&#182;</a>
              </div>
              <p>在document加载完后执行ready</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	        <span class="hljs-keyword">if</span> ( <span class="hljs-built_in">document</span>.readyState === <span class="hljs-string">"complete"</span> ) {</pre></div></div>
            
        </li>
        
        
        <li id="section-154">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-154">&#182;</a>
              </div>
              <p>Handle it asynchronously to allow scripts the opportunity to delay ready</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	            setTimeout( jQuery.ready, <span class="hljs-number">1</span> );</pre></div></div>
            
        </li>
        
        
        <li id="section-155">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-155">&#182;</a>
              </div>
              <p>标准浏览器支持DOMContentLoaded事件，使用时间处理</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> ( <span class="hljs-built_in">document</span>.addEventListener ) {</pre></div></div>
            
        </li>
        
        
        <li id="section-156">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-156">&#182;</a>
              </div>
              <p>优先绑定DOMContentLoaded，不需要等所有静态资源都加载</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	            <span class="hljs-built_in">document</span>.addEventListener( <span class="hljs-string">"DOMContentLoaded"</span>, DOMContentLoaded, <span class="hljs-literal">false</span> );</pre></div></div>
            
        </li>
        
        
        <li id="section-157">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-157">&#182;</a>
              </div>
              <p>回退到window.onload事件绑定，所有的浏览器都支持</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	            <span class="hljs-built_in">window</span>.addEventListener( <span class="hljs-string">"load"</span>, jQuery.ready, <span class="hljs-literal">false</span> );</pre></div></div>
            
        </li>
        
        
        <li id="section-158">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-158">&#182;</a>
              </div>
              <p>If IE event model is used</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	        } <span class="hljs-keyword">else</span> {</pre></div></div>
            
        </li>
        
        
        <li id="section-159">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-159">&#182;</a>
              </div>
              <p>优先绑定onreadystatechange，不需要等所有静态资源都加载</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	            <span class="hljs-built_in">document</span>.attachEvent( <span class="hljs-string">"onreadystatechange"</span>, DOMContentLoaded );</pre></div></div>
            
        </li>
        
        
        <li id="section-160">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-160">&#182;</a>
              </div>
              <p>回退到window.onload事件绑定，所有的浏览器都支持</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	            <span class="hljs-built_in">window</span>.attachEvent( <span class="hljs-string">"onload"</span>, jQuery.ready );</pre></div></div>
            
        </li>
        
        
        <li id="section-161">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-161">&#182;</a>
              </div>
              <p>如果IE并且不是一个frame，针对ie9一下的版本
不断地检查，看是否该文件已准备就绪</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	            <span class="hljs-keyword">var</span> top = <span class="hljs-literal">false</span>;

	            <span class="hljs-keyword">try</span> {
	                top = <span class="hljs-built_in">window</span>.frameElement == <span class="hljs-literal">null</span> &amp;&amp; <span class="hljs-built_in">document</span>.documentElement;
	            } <span class="hljs-keyword">catch</span>(e) {}

	            <span class="hljs-keyword">if</span> ( top &amp;&amp; top.doScroll ) {
	                (<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">doScrollCheck</span>(<span class="hljs-params"></span>) </span>{
	                    <span class="hljs-keyword">if</span> ( !jQuery.isReady ) {

	                        <span class="hljs-keyword">try</span> {</pre></div></div>
            
        </li>
        
        
        <li id="section-162">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-162">&#182;</a>
              </div>
              <p><a href="http://javascript.nwbox.com/IEContentLoaded/">http://javascript.nwbox.com/IEContentLoaded/</a></p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	                            top.doScroll(<span class="hljs-string">"left"</span>);
	                        } <span class="hljs-keyword">catch</span>(e) {
	                            <span class="hljs-keyword">return</span> setTimeout( doScrollCheck, <span class="hljs-number">50</span> );
	                        }</pre></div></div>
            
        </li>
        
        
        <li id="section-163">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-163">&#182;</a>
              </div>
              <p>执行回调函数</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	                        jQuery.ready();
	                    }
	                })();
	            }
	        }
	    }
	    <span class="hljs-keyword">return</span> readyList.promise( obj );
	};</pre></div></div>
            
        </li>
        
        
        <li id="section-164">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-164">&#182;</a>
              </div>
              <p>初始化class2type变量，供jquery.type使用</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	jQuery.each(<span class="hljs-string">"Boolean Number String Function Array Date RegExp Object"</span>.split(<span class="hljs-string">" "</span>), <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">i, name</span>) </span>{
	    class2type[ <span class="hljs-string">"[object "</span> + name + <span class="hljs-string">"]"</span> ] = name.toLowerCase();
	});</pre></div></div>
            
        </li>
        
        
        <li id="section-165">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-165">&#182;</a>
              </div>
              <p>初始化jquery查找上下文，同时触发document的ready事件 </p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	rootjQuery = jQuery(<span class="hljs-built_in">document</span>);</pre></div></div>
            
        </li>
        
        
        <li id="section-166">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-166">&#182;</a>
              </div>
              <p>清理回调函数，避免二次触发</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	<span class="hljs-keyword">if</span> ( <span class="hljs-built_in">document</span>.addEventListener ) {
	  DOMContentLoaded = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
	    <span class="hljs-built_in">document</span>.removeEventListener( <span class="hljs-string">"DOMContentLoaded"</span>, DOMContentLoaded, <span class="hljs-literal">false</span> );
	    jQuery.ready();
	  };

	} <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> ( <span class="hljs-built_in">document</span>.attachEvent ) {
	  DOMContentLoaded = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
	    <span class="hljs-keyword">if</span> ( <span class="hljs-built_in">document</span>.readyState === <span class="hljs-string">"complete"</span> ) {
	      <span class="hljs-built_in">document</span>.detachEvent( <span class="hljs-string">"onreadystatechange"</span>, DOMContentLoaded );
	      jQuery.ready();
	    }
	  };
	}

	<span class="hljs-keyword">return</span> jQuery;

	})();</pre></div></div>
            
        </li>
        
    </ul>
  </div>
</body>
</html>
